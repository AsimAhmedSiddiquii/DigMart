<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <title>Seller | DigMart</title>
  <link href="/vendor/fontawesome/css/fontawesome.min.css" rel="stylesheet">
  <link href="/vendor/fontawesome/css/solid.min.css" rel="stylesheet">
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="/js/seller/multi-select.js"></script>
  <link rel="stylesheet" href="/css/master.css">
  <link rel="stylesheet" href="/css/seller/signup.css">
  <style>
    #backbtn {
      width: 45px;
      height: 45px;
      line-height: 30px;
      border: 2px solid #f5f5f5;
      border-radius: 50%;
      color: #f5f5f5;
      text-align: center;
      text-decoration: none;
      background: #0d6efd;
      box-shadow: 0 0 3px gray;
      font-size: 30px;
      font-weight: bold;
      float: left;
    }

    /* Scroll to Top */
    #scrollUp {
      position: fixed;
      right: 2%;
      bottom: 3%;
      height: 2.813rem;
      width: 2.5rem;
      border-radius: 10rem;
      text-align: center;
      cursor: pointer;
      z-index: 500;
      display: none;
      -webkit-transition: all 0.4s ease-in-out 0s;
      transition: all 0.4s ease-in-out 0s;
      background: #0d6efd;
      box-shadow: 0 0 3px gray;
    }

    #scrollUp span {
      line-height: 3.2rem;
    }

    #scrollUp.scrollActive {
      display: block;
    }

    #busGstNo_err,
    #busMobile_err,
    #busEmail_err,
    #busFssaiNo_err,
    #reaccno_err {
      display: none;
    }
  </style>
</head>

<body>

  <div class="wrapper">
    <div id="body" class="active">
      <div class="content">
        <div class="container">

          <div class="page-title text-center mt-2 mb-4">
            <a href="/seller/login"><button id="backbtn"><i class="fas fa-caret-left"
                  style="transform: translateX(-10%);"></i></button></a>
            <h1 class="d-inline-block" style="transform: translateX(-5%);">Registration Form</h1>
          </div>

          <form id="signupForm" method="post" action="/seller/add-seller" class="row needs-validation" novalidate
            enctype="multipart/form-data">

            <!-- OWNER DETAILS -->
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header">Owner Details</div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="pFname" class="form-label">First Name</label>
                      <input value="" id="pFname" type="text" class="form-control" name="pFname"
                        placeholder="First Name" pattern="[A-Za-z]{1,15}" maxlength='15' required>
                      <div class="invalid-feedback">Please enter a valid Name!</div>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="pLname" class="form-label">Last Name</label>
                      <input value="" id="pLname" type="text" class="form-control" name="pLname" placeholder="Last Name"
                        pattern="[A-Za-z]{1,15}" maxlength='15' required>
                      <div class="invalid-feedback">Please enter a valid Name!</div>
                    </div>
                  </div>

                  <label for="pMobile" class="form-label">Mobile No.</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">+91</span>
                    <input value="" id="pMobile" type="numeric" class="form-control" name="pMobile"
                      placeholder="Mobile No." maxlength='10' pattern="^[0-9]{10}$" style="width: 80%;" required
                      aria-describedby="basic-addon1">
                    <div class="invalid-feedback">Please enter a valid Mobile No.!</div>
                  </div>

                  <div class="mb-3 ">
                    <label for="pEmail" class="form-label">Email</label>
                    <input value="" id="pEmail" type="email" class="form-control" name="pEmail" placeholder="Email"
                      pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required>
                    <div class="invalid-feedback">Please enter a valid Email-ID!</div>
                  </div>

                </div>
              </div>
            </div>

            <!-- BUSINESS DETAILS -->
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header">Business Details</div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="col-md-6">
                      <label for="busName" class="form-label">Business Name</label>
                      <input value="" id="busName" type="text" class="form-control" name="busName"
                        placeholder="Business Name" maxlength="25" required>
                      <div class="invalid-feedback">Please enter a valid Name!</div>
                    </div>
                    <div class="col-md-6">
                      <label for="busMobile" class="form-label">Business's Mobile No.</label>
                      <input value="" id="busMobile" type="numeric" class="form-control" name="busMobile"
                        placeholder="Mobile No." maxlength='10' oninput="check('busMobile',this, 'busMobile_err')"
                        pattern="[0-9]{10,}" required>
                      <small class="form-text text-muted"><span style="text-decoration: underline;">Note</span> :
                        Entered Mobile No. will be used for verification purposes</small>
                      <div class="invalid-feedback">Please enter a valid Mobile No.!</div>
                      <small id="busMobile_err" class="form-text text-danger">Mobile No.
                        already registered!</small>
                    </div>
                  </div>

                  <div class="mb-3 ">
                    <label for="busEmail" class="form-label">Business Email</label>
                    <input value="" id="busEmail" type="email" class="form-control" name="busEmail"
                      placeholder="Business Email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                      oninput="check('busEmail',this, 'busEmail_err')" required>
                    <small class="form-text text-muted"><span style="text-decoration: underline;">Note</span> :
                      Entered Email will be used for verification purposes</small>
                    <div class="invalid-feedback">Please enter a valid Email-ID!</div>
                    <small id="busEmail_err" class="form-text text-danger">Email-ID already
                      registered!</small>
                  </div>

                  <div class="row g-2">
                    <div class="mb-3 col-md-9">
                      <label for="busAddress" class="form-label">Business Address</label>
                      <input value="Shop no. 01, Mahatma Gandhi Nagar, LBS Marg, Kurla West, Mumbai" id="busAddress"
                        type="text" class="form-control" name="busAddress"
                        placeholder="Example, 1234 Main St, Unit, Building, Landmark" required>
                      <div class="invalid-feedback">Please enter a valid Address!</div>
                    </div>
                    <div class="mb-3 col-md-3">
                      <label for="busZip" class="form-label">PIN Code</label>
                      <input value="400070" id="busZip" type="numeric" class="form-control" name="busZip"
                        placeholder="PIN Code" minlength="6" pattern="^[1-9][0-9]{5}$" required>
                      <div class="invalid-feedback">Invalid PIN Code!</div>
                    </div>
                  </div>

                  <hr>

                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="busType" class="form-label">Business type</label>
                      <select id="busType" name="busType" class="form-select" required>
                        <option value="" selected>Choose...</option>
                        <option value="Sole Proprietor">Sole Proprietor</option>
                        <option value="Limited Liability Partnership">Limited Liability Partnership (L.L.P)</option>
                        <option value="Corporation">Corporation (Corp.)</option>
                      </select>
                      <div class="invalid-feedback">Please select a Business Type.</div>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="busLogo" class="form-label">Upload Business Logo</label>
                      <input id="busLogo" type="file" class="form-control" name="busLogo" accept="image/*" required>
                      <div class="invalid-feedback">Please enter a valid document!</div>
                    </div>
                  </div>

                  <div class="mb-4">
                    <label for="busCat" class="form-label">Product Category</label>
                    <!-- <select class="form-select" name="busCat" id="busCat" multiple multiselect-search="true"
                      multiselect-select-all="true" multiselect-max-items="10" required> -->
                    <select class="form-select" name="busCat" id="busCat" multiple multiselect-search="true" required>
                      <% if(catsData.length!=0){ catsData.forEach(function(data){ %>
                        <option value="<%=data._id %>">
                          <%=data.catName %>
                        </option>
                        <% }) %>
                          <% } else{ %>
                            <option value="No Category">Category Not
                              Available</option>
                            <% } %>
                    </select>
                    <div class="invalid-feedback">Please select a Product Category.</div>
                  </div>

                  <hr>

                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="busPanNo" class="form-label">PAN No.</label>
                      <input value="ABCDE1111X" id="busPanNo" type="numeric" class="form-control" name="busPanNo"
                        placeholder="PAN No." maxlength='10' required pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}">
                      <div class="invalid-feedback">Please enter valid PAN No.</div>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="busPanFile" class="form-label">Upload PAN Card</label>
                      <input id="busPanFile" type="file" class="form-control" name="busPanFile" accept="image/*,.pdf"
                        required>
                      <div class="invalid-feedback">Please enter a valid document!</div>
                    </div>
                  </div>

                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="busGstNo" class="form-label">GST No.</label>
                      <input id="busGstNo" type="numeric" class="form-control" name="busGstNo" placeholder="GST No."
                        maxlength='15' oninput="check('busGstNo',this,'busGstNo_err')"
                        pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$" required>
                      <div class="invalid-feedback">Please enter valid GST No.</div>
                      <small id="busGstNo_err" class="form-text text-danger">GST No.
                        already registered!</small>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="busGstFile" class="form-label">Upload GST File</label>
                      <input id="busGstFile" type="file" class="form-control" name="busGstFile" accept="image/*,.pdf"
                        required>
                      <div class="invalid-feedback">Please enter a valid document!</div>
                    </div>
                  </div>

                  <div class="row g-2 d-none" id="fssaiDiv">
                    <div class="mb-3 col-md-6">
                      <label for="busFssaiNo" class="form-label">FSSAI No.</label>
                      <input id="busFssaiNo" type="numeric" class="form-control" name="busFssaiNo"
                        placeholder="FSSAI No." maxlength='14' pattern="[0-9]{14,}">
                      <div class="invalid-feedback">Please enter valid FSSAI No.</div>
                      <small id="busFssaiNo_err" class="form-text text-danger">FSSAI No.
                        already registered!</small>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="busFssaiFile" class="form-label">Upload FSSAI Certificate</label>
                      <input id="busFssaiFile" type="file" class="form-control" name="busFssaiFile"
                        accept="image/*,.pdf">
                      <div class="invalid-feedback">Please enter a valid document!</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- BANK DETAILS -->
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header">Bank Details</div>
                <div class="card-body">
                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="bankName" class="form-label">Name of the Bank</label>
                      <input value="HDFC Bank" id="bankName" type="text" class="form-control" name="bankName"
                        placeholder="Bank name" pattern="[A-Za-z ]{1,30}" required>
                      <div class="invalid-feedback">Please enter a valid Name!</div>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="bankIfsc" class="form-label">IFSC Code</label>
                      <input value="SBIN0125620" id="bankIfsc" type="text" class="form-control" name="bankIfsc"
                        placeholder="IFSC Code" pattern="^[A-Z]{4}0[A-Z0-9]{6}$" required>
                      <div class="invalid-feedback">Please Enter a valid IFSC Code!</div>
                    </div>
                  </div>

                  <div class="row g-2">
                    <div class="mb-3 col-md-6">
                      <label for="bankAccNo" class="form-label">Bank Account No.</label>
                      <input value="123456789012" id="bankAccNo" type="numeric" class="form-control" name="bankAccNo"
                        placeholder="Account No." maxlength='18' required pattern="^\d{9,18}$">
                      <div class="invalid-feedback">Please enter a valid Account No.!</div>
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="bankAccNo2" class="form-label">Re-enter Account No.</label>
                      <input value="123456789012" id="bankAccNo2" class="form-control" placeholder="Account No."
                        maxlength='18' required onkeyup="checkAccNo(this.value)">
                      <small id="reaccno_err" class="form-text text-danger">
                        Account No. does not match!</small>
                    </div>
                  </div>

                  <div class="row g-2">
                    <div class="mb-3 col-md-8">
                      <label for="bankChqPass" class="form-label">Upload a Cancelled Cheque / First page of
                        Passbook</label>
                      <input id="bankChqPass" type="file" class="form-control" name="bankChqPass" accept="image/*,.pdf"
                        required>
                      <div class="invalid-feedback">Please enter a valid document!</div>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="text-center mt-3 mb-3">
              <button id="submit1" type="submit" class="btn btn-primary w-25">Submit</button>
            </div>

          </form>
        </div>
      </div>
      <!-- Scroll Back to top -->
      <div id="scrollUp" title="Scroll to Top">
        <a href="#backbtn"><span><i class="fas fa-chevron-up fs-4 text-white"></i></span></a>
      </div>
    </div>
  </div>

</body>
<script src="/vendor/jquery/jquery.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/js/form-validator.js"></script>

<script>
  $(document).ready(function () {
    let scrollTopButton = document.querySelector("#scrollUp");
    window.onscroll = function () {
      var scroll = document.documentElement.scrollTop;
      if (scroll >= 250)
        scrollTopButton.classList.add('scrollActive');
      else
        scrollTopButton.classList.remove('scrollActive');
    }
  })

  function check(toCheck, el, errMsg) {
    $.ajax({
      url: "/seller/check",
      type: "POST",
      data: {
        toCheck: toCheck,
        val: el.value,
      },
      dataType: 'json',
      success: function (res) {
        if (res.result) {
          $("#" + errMsg).css('display', 'none')
          if ($('#busGstNo_err').css('display') == 'none' &&
            $('#busMobile_err').css('display') == 'none' &&
            $('#busEmail_err').css('display') == 'none' &&
            $('#busFssaiNo_err').css('display') == 'none')
            $('#submit1').removeAttr('disabled')
        } else {
          $("#" + errMsg).css('display', 'block')
          $('#submit1').attr('disabled', 'disabled')
        }
      }
    })
  }

  function checkAccNo(accno) {
    if ($('#bankAccNo').val() == accno) {
      $('#bankAccNo2').removeClass('is-invalid')
      $('#reaccno_err').css('display', 'none')
      $('#submit1').removeAttr('disabled')
    } else {
      $('#bankAccNo2').addClass('is-invalid')
      $('#reaccno_err').css('display', 'block')
      $('#submit1').attr('disabled', 'disabled')
    }
  }

  $('#busCat').on('change', function () {
    if ($(this).val().includes('6366707522bae1f258f8c56c')) {
      $('#fssaiDiv').removeClass('d-none')
      $('#busFssaiNo').attr('required', 'required')
    } else {
      $('#fssaiDiv').addClass('d-none')
      $('#busFssaiNo').removeAttr('required')
    }
  })
</script>

</html>