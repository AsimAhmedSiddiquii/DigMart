<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <title>Registration | DigMart</title>
    <link href="/vendor/fontawesome/css/fontawesome.min.css" rel="stylesheet">
    <link href="/vendor/fontawesome/css/solid.min.css" rel="stylesheet">
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="/js/seller/multi-select.js"></script>
    <link rel="stylesheet" href="/css/master.css">
    <link rel="stylesheet" href="/css/seller/signup.css">
    <style>
        #head a {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            color: #444;
        }
        
        #head a:hover {
            color: white;
        }
        
        #head img {
            width: 48px;
            height: 48px;
        }
        
        #head h1 {
            line-height: 48px;
        }
        
        @media screen and (max-width: 400px) {
            #head img {
                height: 40px;
                width: 40px;
            }
            #head a {
                transform: translateY(-50%) scale(0.85);
            }
        }
        /* Scroll to Top */
        
        #scrollUp {
            position: fixed;
            right: 2%;
            bottom: 3%;
            height: 2.813rem;
            width: 2.5rem;
            border-radius: 10rem;
            text-align: center;
            cursor: pointer;
            z-index: 500;
            display: none;
            -webkit-transition: all 0.4s ease-in-out 0s;
            transition: all 0.4s ease-in-out 0s;
            background: #0d6efd;
            box-shadow: 0 0 3px gray;
        }
        
        #scrollUp span {
            line-height: 3.2rem;
        }
        
        #scrollUp.scrollActive {
            display: block;
        }
    </style>
</head>

<body>

    <div class="wrapper">
        <div id="body" class="active">
            <div class="content">
                <div class="container">

                    <div id='head' class="page-title text-center mt-2 mb-4 position-relative" style="min-height: 48px;">
                        <a class="btn btn-outline-secondary" href="/seller/login"><i class="fas fa-caret-left"></i></a>
                        <h1>Registration Form</h1>
                        <img class="position-absolute end-0 top-50 translate-middle-y" src="/img/DigMart.png" alt="bootstraper logo">
                    </div>

                    <form id="signupForm" method="post" action="/seller/add-seller" class="row needs-validation" novalidate enctype="multipart/form-data">

                        <!-- OWNER DETAILS -->
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">Owner Details</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="pFname" class="form-label">First Name</label>
                                            <input value="" id="pFname" type="text" class="form-control" name="pFname" placeholder="First Name" pattern="[A-Za-z]{1,15}" maxlength='15' required>
                                            <div class="invalid-feedback">Please enter a valid Name!</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="pLname" class="form-label">Last Name</label>
                                            <input value="" id="pLname" type="text" class="form-control" name="pLname" placeholder="Last Name" pattern="[A-Za-z]{1,15}" maxlength='15' required>
                                            <div class="invalid-feedback">Please enter a valid Name!</div>
                                        </div>
                                    </div>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="pMobile" class="form-label">Mobile No.</label>
                                            <div class="input-group mb-3">
                                                <span class="input-group-text" id="basic-addon1">+91</span>
                                                <input id="pMobile" type="numeric" class="form-control" name="pMobile" placeholder="Mobile No." maxlength='10' pattern="^[0-9]{10}$" style="width: 80%;" required aria-describedby="basic-addon1">
                                                <div class="invalid-feedback">Please enter a valid Mobile No.!</div>
                                            </div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <div class="mb-3">
                                                <label for="pEmail" class="form-label">Email Address</label>
                                                <input id="pEmail" type="email" class="form-control" name="pEmail" placeholder="Email Address" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required>
                                                <div class="invalid-feedback">Please enter a valid Email-ID!</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- BUSINESS DETAILS -->
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">Business Details</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="col-md-6">
                                            <label for="busName" class="form-label">Business Name</label>
                                            <input id="busName" type="text" class="form-control" name="busName" placeholder="Business Name" maxlength="25" required>
                                            <div class="invalid-feedback">Please enter a valid Name!</div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="busMobile" class="form-label">Business's Mobile No.</label>
                                            <input id="busMobile" type="numeric" class="form-control" name="busMobile" placeholder="Mobile No." maxlength='10' oninput="check('busMobile',this, '#busMobile_err','Mobile No.')" pattern="[0-9]{10,}" required>
                                            <div id="busMobile_err" class="invalid-feedback">Please enter a valid Mobile No.!</div>
                                            <small class="form-text text-muted"><span style="text-decoration: underline;">Note</span>: Entered Mobile No. will be used for verification purposes</small>
                                        </div>
                                    </div>

                                    <div class="mb-3 ">
                                        <label for="busEmail" class="form-label">Business Email</label>
                                        <input value="" id="busEmail" type="email" class="form-control" name="busEmail" placeholder="Business Email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" oninput="check('busEmail',this, '#busEmail_err','Email-ID')" required>
                                        <div id="busEmail_err" class="invalid-feedback">Please enter a valid Email-ID!</div>
                                        <small class="form-text text-muted"><span style="text-decoration: underline;">Note</span>: Entered Email will be used for verification purposes</small>
                                    </div>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-9">
                                            <label for="busAddress" class="form-label">Business Address</label>
                                            <input id="busAddress" type="text" class="form-control" name="busAddress" placeholder="Example, 1234 Main St, Unit, Building, Landmark" required>
                                            <div class="invalid-feedback">Please enter a valid Address!</div>
                                        </div>
                                        <div class="mb-3 col-md-3">
                                            <label for="busZip" class="form-label">PIN Code</label>
                                            <input id="busZip" type="numeric" class="form-control" name="busZip" placeholder="PIN Code" minlength="6" pattern="^[1-9][0-9]{5}$" required>
                                            <div class="invalid-feedback">Invalid PIN Code!</div>
                                        </div>
                                    </div>

                                    <hr>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="busType" class="form-label">Business type</label>
                                            <select id="busType" name="busType" class="form-select" required>
                                                <option value="" selected>Choose...</option>
                                                <option value="Sole Proprietor">Sole Proprietor</option>
                                                <option value="Limited Liability Partnership">Limited Liability Partnership (L.L.P)</option>
                                                <option value="Corporation">Corporation (Corp.)</option>
                                            </select>
                                            <div class="invalid-feedback">Please select a Business Type.</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="busLogo" class="form-label">Upload Business Logo</label>
                                            <input id="busLogo" type="file" class="form-control" name="busLogo" accept="image/*" required>
                                            <div class="invalid-feedback">Please enter a valid document!</div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <label for="busCat" class="form-label">Product Category</label>

                                        <select class="form-select" name="busCat" id="busCat" multiple multiselect-search="true" required>
                                        <% if(catsData.length!=0){ catsData.forEach(function(data){ %>
                                            <option value="<%=data._id %>">
                                            <%=data.catName %>
                                            </option>
                                            <% }) %>
                                            <% } else { %>
                                                <option value="No Category">Category Not Available</option>
                                                <% } %>
                                        </select>
                                        <div class="invalid-feedback">Please select a Product Category.</div>
                                    </div>

                                    <hr>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="busPanNo" class="form-label">PAN No.</label>
                                            <input id="busPanNo" type="numeric" class="form-control" name="busPanNo" placeholder="PAN No." maxlength='10' required pattern="[A-Z]{5}[0-9]{4}[A-Z]{1}">
                                            <div class="invalid-feedback">Please enter valid PAN No.</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="busPanFile" class="form-label">Upload PAN Card</label>
                                            <input id="busPanFile" type="file" class="form-control" name="busPanFile" accept="image/*,.pdf" required>
                                            <div class="invalid-feedback">Please enter a valid document!</div>
                                        </div>
                                    </div>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="busGstNo" class="form-label">GST No.</label>
                                            <input id="busGstNo" type="numeric" class="form-control" name="busGstNo" placeholder="GST No." maxlength='15' oninput="check('busGstNo',this,'#busGstNo_err','GST No.')" pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$" required>
                                            <div id="busGstNo_err" class="invalid-feedback">Please enter valid GST No.</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="busGstFile" class="form-label">Upload GST File</label>
                                            <input id="busGstFile" type="file" class="form-control" name="busGstFile" accept="image/*,.pdf" required>
                                            <div class="invalid-feedback">Please enter a valid document!</div>
                                        </div>
                                    </div>

                                    <div class="row g-2 d-none" id="fssaiDiv">
                                        <div class="mb-3 col-md-6">
                                            <label for="busFssaiNo" class="form-label">FSSAI No.</label>
                                            <input id="busFssaiNo" type="numeric" class="form-control" name="busFssaiNo" placeholder="FSSAI No." maxlength='14' oninput="check('busFssaiNo',this,'#busFssaiNo_err','FSSAI No.')" pattern="[0-9]{14,}">
                                            <div id="busFssaiNo_err" class="invalid-feedback">Please enter valid FSSAI No.</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="busFssaiFile" class="form-label">Upload FSSAI Certificate</label>
                                            <input id="busFssaiFile" type="file" class="form-control" name="busFssaiFile" accept="image/*,.pdf">
                                            <div class="invalid-feedback">Please enter a valid document!</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- BANK DETAILS -->
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">Bank Details</div>
                                <div class="card-body">
                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="bankName" class="form-label">Name of the Bank</label>
                                            <input id="bankName" type="text" class="form-control" name="bankName" placeholder="Bank name" pattern="[A-Za-z ]{1,30}" required>
                                            <div class="invalid-feedback">Please enter a valid Name!</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="bankIfsc" class="form-label">IFSC Code</label>
                                            <input id="bankIfsc" type="text" class="form-control" name="bankIfsc" placeholder="IFSC Code" pattern="^[A-Z]{4}0[A-Z0-9]{6}$" required>
                                            <div class="invalid-feedback">Please Enter a valid IFSC Code!</div>
                                        </div>
                                    </div>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-6">
                                            <label for="bankAccNo" class="form-label">Bank Account No.</label>
                                            <input id="bankAccNo" type="numeric" class="form-control" name="bankAccNo" placeholder="Account No." maxlength='18' required pattern="^\d{9,18}$">
                                            <div class="invalid-feedback">Please enter a valid Account No.!</div>
                                        </div>
                                        <div class="mb-3 col-md-6">
                                            <label for="bankAccNo2" class="form-label">Re-enter Account No.</label>
                                            <input id="bankAccNo2" class="form-control" placeholder="Account No." maxlength='18' required onkeyup="checkAccNo(this.value)">
                                            <div class="invalid-feedback">Account No. does not match!</div>
                                        </div>
                                    </div>

                                    <div class="row g-2">
                                        <div class="mb-3 col-md-12">
                                            <label for="bankChqPass" class="form-label">Upload a Cancelled Cheque / First page of Passbook</label>
                                            <input id="bankChqPass" type="file" class="form-control" name="bankChqPass" accept="image/*,.pdf" required>
                                            <div class="invalid-feedback">Please enter a valid document!</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-3 mb-3">
                            <button id="submit1" type="submit" class="btn btn-primary w-25">Submit</button>
                        </div>

                    </form>
                </div>
            </div>
            <!-- Scroll Back to top -->
            <div id="scrollUp" title="Scroll to Top">
                <a href="#backbtn"><span><i class="fas fa-chevron-up fs-4 text-white"></i></span></a>
            </div>
        </div>
    </div>

</body>
<script src="/vendor/jquery/jquery.min.js"></script>
<script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/js/form-validator.js"></script>

<script>
    $(document).ready(function() {
        let scrollTopButton = document.querySelector("#scrollUp");
        window.onscroll = function() {
            var scroll = document.documentElement.scrollTop;
            if (scroll >= 250)
                scrollTopButton.classList.add('scrollActive');
            else
                scrollTopButton.classList.remove('scrollActive');
        }
    })

    function check(toCheck, el, errMsg, val) {
        $.ajax({
            url: "/seller/check",
            type: "POST",
            data: {
                toCheck: toCheck,
                val: el.value,
            },
            dataType: 'json',
            success: function(res) {
                if (res.result) {
                    el.classList.remove('is-invalid')
                    $(errMsg).html('Please enter a valid ' + val + '!');
                    if (!$("#busMobile, #busEmail, #bustGstNo, #busFssaiNo").hasClass('is-invalid'))
                        $('#submit1').removeAttr('disabled')
                } else {
                    $('#signupForm').removeClass('was-validated')
                    el.classList.add('is-invalid')
                    $(errMsg).html(val + " already registered!");
                    $('#submit1').attr('disabled', 'disabled')
                }
            }
        })
    }

    function checkAccNo(accno) {
        if ($('#bankAccNo').val() == accno) {
            $('#bankAccNo2').removeClass('is-invalid')
            $('#submit1').removeAttr('disabled')
        } else {
            $('#signupForm').removeClass('was-validated')
            $('#bankAccNo2').addClass('is-invalid')
            $('#submit1').attr('disabled', 'disabled')
        }
    }

    $('#busCat').on('change', function() {
        if ($(this).val().includes('6366707522bae1f258f8c56c')) {
            $('#fssaiDiv').removeClass('d-none')
            $('#busFssaiNo').attr('required', 'required')
        } else {
            $('#fssaiDiv').addClass('d-none')
            $('#busFssaiNo').removeAttr('required')
        }
    })
</script>

</html>